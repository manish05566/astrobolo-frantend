(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[193],{1265:(e,a,s)=>{"use strict";s.d(a,{A:()=>d});var t=s(7876),l=s(4232),r=s(8230),n=s.n(r);s(8519);var i=s(6460),c=s(8581);let o=function(){let[e,a]=(0,l.useState)(null),[s,r]=(0,l.useState)(null),[n,o]=(0,l.useState)(""),[d,h]=(0,l.useState)(""),[m,u]=(0,l.useState)("/images/userprofile.png"),[p,x]=(0,l.useState)(null);(0,l.useEffect)(()=>{let e=localStorage.getItem("user");if(e){let a=JSON.parse(e),s=null==a?void 0:a.user,t=null==a?void 0:a.type;(null==s?void 0:s.id)&&"user"===t?(x(s.id),b(s.id)):console.warn("User type is not 'user' or ID is missing")}},[]);let b=async e=>{try{let s=localStorage.getItem("token"),t=await (0,c.W)("".concat(i.v.base_url,"users/").concat(e),{method:"GET",headers:{Authorization:"Bearer ".concat(s)}}),l=await t.json();if(t.ok&&l.data){let e=l.data.image||"/images/userprofile.png";u(e),a(l.data)}}catch(e){console.error("Error fetching user:",e)}},f=async()=>{if(!s||!p)return;let e=new FormData;e.append("image",s);try{let a=localStorage.getItem("token"),s=await (0,c.W)("".concat(i.v.base_url,"users/upload-profile/").concat(p),{method:"PUT",headers:{Authorization:"Bearer ".concat(a)},body:e}),t=await s.json();if(s.ok&&t.status){let e=t.data||"/images/userprofile.png";u("".concat(e,"?").concat(Date.now())),r(null)}else o(t.message||"Upload failed. Try again."),h("error")}catch(e){console.error("Upload error:",e),alert("Something went wrong while uploading.")}};return(0,t.jsxs)("div",{className:"text-center user-photo",children:[(0,t.jsxs)("div",{className:"position-relative d-inline-block",children:[(0,t.jsx)("img",{src:m,className:"rounded-circle profile-pic img-thumbnail",alt:"Profile",width:"120",height:"120"}),(0,t.jsx)("label",{htmlFor:"upload-photo",className:"btn btn-primary btn-sm position-absolute bottom-0 end-0 rounded-circle",title:"Change Photo",style:{cursor:"pointer"},children:(0,t.jsx)("i",{className:"fas fa-camera"})}),(0,t.jsx)("input",{type:"file",id:"upload-photo",accept:"image/*",onChange:e=>{var a;let s=null==(a=e.target.files)?void 0:a[0];if(s){if(s.size/1024>50){o("Image size should be 50KB or less."),h("error"),r(null);return}r(s),u(URL.createObjectURL(s))}},style:{display:"none"}})]}),(0,t.jsxs)("div",{className:"mt-2",children:[n&&(0,t.jsx)("p",{style:{color:"success"===d?"green":"red",fontSize:"0.75rem",margin:0},children:n}),!n&&s&&(0,t.jsx)("button",{className:"btn btn-success btn-sm",style:{fontSize:"0.75rem",padding:"2px 8px"},onClick:()=>f(s),children:"Upload"})]}),(0,t.jsxs)("p",{className:"mt-2 mb-1 profile-name fw-bold",children:[null==e?void 0:e.first_name," ",null==e?void 0:e.last_name]}),(0,t.jsxs)("p",{className:"text-muted mb-3 profile-number",children:["(+91 ",null==e?void 0:e.mobile,")"]})]})},d=function(){return(0,t.jsx)("div",{className:"p-4 pt-0 Sidebar",children:(0,t.jsxs)("div",{className:"nav flex-column nav-pills leftbar",children:[(0,t.jsx)("div",{className:"profile-ph-part",children:(0,t.jsx)(o,{})}),(0,t.jsxs)("div",{className:"left-menu py-3",children:[(0,t.jsx)(n(),{className:"nav-link border-bottom",href:"/profile",children:"Personal Info"}),(0,t.jsx)(n(),{className:"nav-link border-bottom",href:"/wallet-transation",children:"Wallet Transation"}),(0,t.jsx)(n(),{className:"nav-link border-bottom d-flex justify-content-between align-items-center",href:"/wallet-recharge",children:"Wallet Recharge"})]})]})})}},6690:(e,a,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/wallet-transation",function(){return s(9178)}])},8519:e=>{e.exports={"profile-sidebar":"leftbar_profile-sidebar__3MbSx","nav-pills":"leftbar_nav-pills__2oh5f","nav-link":"leftbar_nav-link__OC8Qo",leftbar:"leftbar_leftbar__aan3a"}},9178:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>m});var t=s(7876),l=s(432),r=s(4232),n=s(8230),i=s.n(n),c=s(6460),o=s(8581);let d=function(){let[e,a]=(0,r.useState)([]),[s,l]=(0,r.useState)(0);return(0,r.useEffect)(()=>{(async()=>{var e;let s=localStorage.getItem("token"),t=JSON.parse(localStorage.getItem("user")||"{}"),r=null==t||null==(e=t.user)?void 0:e.id;if(s&&r)try{let e=await (0,o.W)("".concat(c.v.base_url,"payment/").concat(r,"/transactions"),{method:"GET",headers:{Authorization:"Bearer ".concat(s)}}),t=await e.json();t.status&&t.data?(l(t.data.balance||0),a(t.data.transactions||[])):(l(0),a([]))}catch(e){console.error("Failed to fetch wallet data",e),l(0),a([])}})()},[]),(0,t.jsxs)("div",{className:"p-4 rounded bg-light",children:[(0,t.jsx)("div",{className:"d-flex justify-content-between align-items-center mb-4",children:(0,t.jsxs)("div",{className:"h5 mb-0",children:["Available balance: ",(0,t.jsxs)("span",{className:"text-success",children:["₹ ",s]}),(0,t.jsx)(i(),{href:"/wallet-recharge",className:"btn btn-outline-success btn-sm ms-3",children:"Recharge"})]})}),(0,t.jsx)("div",{className:"table-responsive",children:(0,t.jsxs)("table",{className:"table table-bordered table-hover",children:[(0,t.jsx)("thead",{className:"table-light",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{children:"Description"}),(0,t.jsx)("th",{children:"Minuts"}),(0,t.jsx)("th",{children:"Transaction Amount"}),(0,t.jsx)("th",{children:"Datetime"}),(0,t.jsx)("th",{children:"Actions"})]})}),(0,t.jsx)("tbody",{children:0===e.length?(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:5,className:"text-center",children:"No transactions found"})}):e.map((e,a)=>(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:"Chat with astrologer"}),(0,t.jsx)("td",{children:e.minuts||"-"}),(0,t.jsxs)("td",{className:"text-success",children:["₹ ",e.amount]}),(0,t.jsx)("td",{children:e.datetime}),(0,t.jsx)("td",{className:"text-danger",children:"-"})]},a))})]})})]})};var h=s(1265);function m(){return(0,l.A)(),(0,t.jsx)("div",{className:"bg-light ",style:{marginTop:"130px"},children:(0,t.jsx)("div",{className:"container-fluid pb-5 pt-0",children:(0,t.jsx)("div",{className:"row",children:(0,t.jsx)("div",{className:"col-12",children:(0,t.jsx)("div",{className:"card border-0 shadow-sm",children:(0,t.jsx)("div",{className:"card-body p-0",children:(0,t.jsxs)("div",{className:"row g-0",children:[(0,t.jsx)("div",{className:"col-lg-3 border-end testClass",children:(0,t.jsx)(h.A,{})}),(0,t.jsx)("div",{className:"col-lg-9",children:(0,t.jsx)(d,{})})]})})})})})})})}}},e=>{e.O(0,[636,593,792],()=>e(e.s=6690)),_N_E=e.O()}]);