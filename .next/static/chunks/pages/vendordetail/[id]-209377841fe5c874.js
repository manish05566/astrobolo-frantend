(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[353],{1236:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>p});var t=a(7876),i=a(9099),n=a(8230),l=a.n(n),r=a(4232);let c=function(e){let{bio:s}=e;return(0,t.jsx)("div",{className:"row mb-4",children:(0,t.jsxs)("div",{className:"col-12",children:[(0,t.jsx)("h5",{children:"About me"}),(0,t.jsx)("p",{children:s})]})})},o=function(){return(0,t.jsxs)("div",{className:"col-md-6 col-12 mb-4",children:[(0,t.jsx)("h5",{children:"Rating & Reviews"}),(0,t.jsxs)("div",{className:"d-flex align-items-center mb-3",children:[(0,t.jsx)("h3",{className:"me-2 mb-0",children:"4.93"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-warning",children:"★★★★★"}),(0,t.jsx)("br",{}),(0,t.jsx)("small",{className:"text-muted",children:"18708 total"})]})]}),(0,t.jsxs)("div",{className:"mb-2 d-flex align-items-center",children:[(0,t.jsx)("span",{className:"me-2",children:"5"}),(0,t.jsx)("div",{className:"rating-bar flex-grow-1",children:(0,t.jsx)("div",{className:"rating-bar-fill bg-success",style:{width:"90%"}})})]}),(0,t.jsxs)("div",{className:"mb-2 d-flex align-items-center",children:[(0,t.jsx)("span",{className:"me-2",children:"4"}),(0,t.jsx)("div",{className:"rating-bar flex-grow-1",children:(0,t.jsx)("div",{className:"rating-bar-fill bg-primary",style:{width:"5%"}})})]}),(0,t.jsxs)("div",{className:"mb-2 d-flex align-items-center",children:[(0,t.jsx)("span",{className:"me-2",children:"3"}),(0,t.jsx)("div",{className:"rating-bar flex-grow-1"})]}),(0,t.jsxs)("div",{className:"mb-2 d-flex align-items-center",children:[(0,t.jsx)("span",{className:"me-2",children:"2"}),(0,t.jsx)("div",{className:"rating-bar flex-grow-1"})]}),(0,t.jsxs)("div",{className:"mb-2 d-flex align-items-center",children:[(0,t.jsx)("span",{className:"me-2",children:"1"}),(0,t.jsx)("div",{className:"rating-bar flex-grow-1"})]}),(0,t.jsx)(l(),{href:"/ChatList",className:"text-primary",title:"Chat With Astrologer",children:"Chat with Assistant?"})]})},d=[{name:"Upasana",rating:5,text:"Highly recommended astrologer, thanks for the positive guidance and detailed analysis, thanks for thorough explanation"},{name:"Premal",rating:5,text:"Person on very small lines but delivering the advice that is required 100% value"},{name:"Upasana",rating:5,text:"Highly recommended astrologer, thanks for the positive guidance and detailed analysis, thanks for thorough explanation"},{name:"Premal",rating:5,text:"Person on very small lines but delivering the advice that is required 100% value"},{name:"Upasana",rating:5,text:"Highly recommended astrologer, thanks for the positive guidance and detailed analysis, thanks for thorough explanation"},{name:"Premal",rating:5,text:"Person on very small lines but delivering the advice that is required 100% value"},{name:"Upasana",rating:5,text:"Highly recommended astrologer, thanks for the positive guidance and detailed analysis, thanks for thorough explanation"},{name:"Premal",rating:5,text:"Person on very small lines but delivering the advice that is required 100% value"}],m=e=>{let{name:s,rating:a,text:i}=e;return(0,t.jsxs)("div",{className:"review-card mb-3",children:[(0,t.jsxs)("div",{className:"d-flex align-items-center mb-2",children:[(0,t.jsx)("img",{src:h,alt:"User",className:"rounded-circle me-2",style:{width:"40px",height:"40px"}}),(0,t.jsxs)("div",{children:[(0,t.jsx)("strong",{children:s}),(0,t.jsx)("br",{}),(0,t.jsx)("span",{className:"text-warning",children:"★".repeat(a)})]})]}),(0,t.jsx)("p",{children:i})]})},h="/images/userprofile.png",g=()=>(0,t.jsxs)("div",{className:"col-md-6 col-12",children:[(0,t.jsxs)("div",{className:"d-flex justify-content-between align-items-center m-3 py-2 px-3 bg-light rounded border",children:[(0,t.jsx)("h5",{children:"User Reviews"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("button",{className:"btn btn-outline-warning btn-sm me-2",children:"Most helpful"}),(0,t.jsx)("button",{className:"btn btn-outline-warning btn-sm",children:"Most recent"})]})]}),(0,t.jsx)("div",{className:"review-driver",children:d.map((e,s)=>(0,t.jsx)(m,{...e},s))})]});var x=a(6460),u=a(8581),b=a(7431),j=a(2491),v=a.n(j);function p(){let e=(0,i.useRouter)(),{id:s}=(0,i.useRouter)().query,[a,n]=(0,r.useState)(null);return((0,r.useEffect)(()=>{s&&(0,u.W)("".concat(x.v.base_url,"vendors/").concat(s)).then(e=>e.json()).then(e=>{let s=e.data;s&&n({id:s.id,first_name:s.first_name,specialist:s.specialist,language:s.language,experience:"".concat(s.experience," years"),chat_charge:"₹ ".concat(s.chat_charge,"/min"),image:s.image||"/images/userprofile.png",bio:s.bio,call_min:s.call_min,chat_min:s.chat_min})}).catch(e=>console.error("Error fetching detail",e))},[s]),a)?(0,t.jsx)("div",{className:"detail sectiontop-margin",children:(0,t.jsxs)("div",{className:"container my-4",children:[(0,t.jsxs)("div",{className:"Profile-section",children:[(0,t.jsxs)("div",{className:"row align-items-center mb-4",children:[(0,t.jsx)("div",{className:"col-md-2 col-4",children:(0,t.jsx)("div",{className:"profile-img-border",children:(0,t.jsx)("img",{src:a.image,alt:a.first_name,className:"profile-img"})})}),(0,t.jsxs)("div",{className:"col-md-6 col-8",children:[(0,t.jsx)("h3",{className:"mb-1",children:a.first_name}),(0,t.jsx)("p",{className:"text-muted mb-1",children:a.specialist}),(0,t.jsx)("p",{className:"text-muted mb-1",children:a.language}),(0,t.jsxs)("p",{className:"text-muted mb-1",children:["Exp: ",a.experience]}),(0,t.jsx)("p",{className:"text-muted mb-1",children:a.chat_charge}),(0,t.jsxs)("p",{className:"text-muted mb-0 d-flex align-items-center",children:[(0,t.jsxs)("span",{className:"me-3 d-flex align-items-center",children:[(0,t.jsx)("img",{src:"/images/chat-offline.webp",alt:"Chat",width:16,height:16,className:"me-1"}),a.chat_min]}),(0,t.jsxs)("span",{className:"d-flex align-items-center",children:[(0,t.jsx)("img",{src:"/images/call-offline.webp",alt:"Call",width:16,height:16,className:"me-1"}),a.call_min]})]})]}),(0,t.jsxs)("div",{className:"col-md-4 col-12 mt-3 mt-md-0 text-md-start text-center",children:[(0,t.jsx)("button",{className:"btn btn-outline-success me-2 mb-2",onClick:()=>{var s;let t=JSON.parse(localStorage.getItem("user")||"{}"),i=(null==t?void 0:t.id)||(null==t||null==(s=t.user)?void 0:s.id);if(!i)return void v().fire("Please log in first","","warning");localStorage.setItem("selected_consultants",JSON.stringify([a])),(0,b.b0)(i,a.id);let n=(0,b.$d)(i,a.id);window.socket.emit("request_chat",{senderId:i,receiverId:a.id,roomId:n}),e.push("/astrologer")},children:"Start Chat"}),(0,t.jsx)("button",{className:"btn btn-outline-success mb-2",onClick:()=>e.push("/TalkAstrologer"),children:"Start Call"})]})]}),(0,t.jsx)("div",{className:"row mb-4",children:(0,t.jsx)("div",{className:"col-12",children:(0,t.jsx)("button",{className:"btn btn-warning",children:"Follow"})})})]}),(0,t.jsx)(c,{bio:a.bio}),(0,t.jsxs)("div",{className:"row mb-4",children:[(0,t.jsx)(o,{}),(0,t.jsx)(g,{})]})]})}):(0,t.jsx)("p",{children:"Loading…"})}},2910:(e,s,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/vendordetail/[id]",function(){return a(1236)}])},7431:(e,s,a)=>{"use strict";a.d(s,{$d:()=>n,G1:()=>m,SR:()=>c,_z:()=>r,b0:()=>l,mb:()=>o,pY:()=>d});var t=a(2692);let i=null,n=(e,s)=>[e,s].sort().join("-"),l=(e,s)=>{let a=n(e,s);return console.log("\uD83D\uDFE1 [initiateSocket] userId:",e,"receiverId:",s,"roomId:",a),new Promise(s=>{i||(i=(0,t.io)("http://www.astrobolo.com",{transports:["websocket"],query:{userId:e},withCredentials:!0}),window.socket=i),i.on("connect",()=>{console.log("✅ [Socket Connected] ID:",i.id),i.emit("join_room",a),console.log("\uD83D\uDCE9 [Join Room] roomId:",a),s(i)}),i.on("disconnect",()=>{console.log("\uD83D\uDD34 [Socket Disconnected]")})})},r=e=>{if(!i)return void console.log("❌ [sendMessage] Socket not initialized.");let s=n(e.sender_id,e.receiver_id);console.log("\uD83D\uDCE4 [sendMessage] Emitting to room:",s,"Message:",e),i.emit("sendMessage",{message:e,roomId:s})},c=e=>{if(!i)return;let s=s=>{console.log("\uD83D\uDCEC [subscribeToMessages] Received message:",s),e(s)};return i.on("receiveMessage",s),()=>{i.off("receiveMessage",s)}},o=e=>{if(!i)return;let s=s=>{console.log("\uD83D\uDCE8 [subscribeToChatRequests] Incoming:",s),e(s)};return i.on("request_chat",s),()=>{i.off("request_chat",s)}},d=e=>{if(console.log(" under subscribeToChatAccepted function in socket"),!i)return;let s=s=>{console.log("✅ [subscribeToChatAccepted] Chat accepted by astrologer:",s),e(s)};return i.on("chat_accepted",s),console.log("socket chat accepted 1"),()=>{console.log("socket chat accepted 2"),i.off("chat_accepted",s)}},m=()=>{i&&(console.log("\uD83D\uDD0C [disconnectSocket] Disconnecting..."),i.disconnect(),i=null)}}},e=>{e.O(0,[692,491,636,593,792],()=>e(e.s=2910)),_N_E=e.O()}]);